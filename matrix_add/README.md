 

### 1 .需求分析：

矩阵的加法运算：

请按照矩阵的十字链表存储方法，实现两个矩阵的加法运算。要求：

①  通过十字链表存储方法，创建两个稀疏矩阵M和N。

②  实现M+N的操作（需要判断M和N维度的合法性）。

 

### 2.概要设计：

对于矩阵的加法运算，采取十字链表类型。根据输入数据，创建并储存两个十字链表矩阵。然后再逐行扫描其中一个矩阵，根据比较结果调用“插入”、“跳过”、“相加”或“删除”四种操作函数。



### 3.详细设计

#### 对于矩阵的加法运算

先定义储存节点的结构体（包含行、列、值、向右指针、向下指针）和十字结构体（包含总行数、总列数、行链表指针、列链表指针）

除主函数外，还包括以下几种函数

创建函数：传入参数为十字结构体，没有返回值。

* 调用函数后，获取输入的矩阵行数和列数，并据此为行链表指针、列链表指针分配空间。然后初始化每个行头、列头指针为NULL。在双重循环中，储存每一个非零元，并分别在相应行、列链表中中储存相应位置，完成向右向下指针的设置。

插入函数：传入参数为向左指针、矩阵A、指向节点a的指针、指向节点b的指针，没有返回值

* 调用函数后，先判断节点a是否为相应行列的头节点，并根据此采取相应的插入方法。

删除节点函数：传入参数为向左指针、矩阵A、指向节点a的指针,没有返回值

* 调用函数后，先判断节点a是否相应行列的头节点，并根据此采取相应删除方法。

跳过函数：传入参数为向左指针、指向节点a的指针，没有返回值

* 调用函数后，左指针和指向节点a的指针分别向右移动。

相加函数：传入参数为向左指针、指向节点a的指针、指向节点b的指针，没有返回值

* 调用函数后，将a对应的值加上b对应的值，存为a的值，然后左指针和指向节点a的指针分别向右移动。

主函数

* 先调用创建函数创建矩阵A和B，判断A和B是否满足矩阵相加条件，若否，则提示后结束程序。若是，扫描A的每一行，不断与B的非零节点比较，分别调用相应函数作出“跳过”、“相加”、“删除”或“插入”的操作。最后再用循环结构输出矩阵A，补全零元。

### 4.调试分析

问题：在运行矩阵的加法运算程序时，程序会异常中断。单步调试到指针运算时报错：*SIGSEGV* --- Segment Fault.

解决过程和办法：在定位处的指针运算中，发现了这种运算会持续到预先设置空间结尾处，由于尾指针没有明确指向，存在越界风险。因此，在最初的指针初始化中，为最后的尾指针赋值NULL。问题解决。

经验总结：在操作指针和数组时要时刻关注越界的问题，养成加上限制条件或者初始化的好习惯。